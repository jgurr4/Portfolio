<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://kit.fontawesome.com/6f406d946e.js" crossorigin="anonymous"></script>
    <!--    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>-->
    <link rel="stylesheet"
          href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</head>
<body>
<span id="menu" class="noSelect">&#9728;</span>
<div id="content" class="noSelect" style="display: block;">
    <button onclick="replaceSection(this.value)" value="about" class="about">About me</button>
    <button onclick="replaceSection(this.value)" value="qualifications" class="qualifications">Qualifications</button>
    <button onclick="replaceSection(this.value)" value="contact" class="contact">Contact</button>
    <button onclick="replaceSection(this.value)" value="portfolio" class="portfolio">Portfolio</button>
</div>

<img id="profileImg" class="noSelect" src="images/profile.jpg">
<div id="top-section">
    <h3 class="noSelect" id="hello">Hello I'm</h3>
    <h1>Jared Gurr</h1>
    <h3>Backend Web Developer</h3>
    <!--
        <p><i class="far fa-envelope"></i> jared@fakeemail.com</p>
        <p><i class="fas fa-phone"></i> +1 480 000 0000</p>
    -->
    <p><i class="fas fa-map-marker-alt"></i> 28, San Tan Valley, Arizona, United States</p>
    <div id="symbol" class="noSelect">
        <a id="linked" target="_blank" href="https://linkedin.com/in/jared-gurr-173008b7" class="fa fa-linkedin"></a>
        <a id="github" target="_blank" href="https://github.com/jgurr4/Portfolio" class="fa fa-github"></a>
        <a id="codewar" target="_blank" href="https://www.codewars.com/users/Nosferatu123" class="fas fa-code"></a>
        <a id="stack" target="_blank" href="https://stackoverflow.com/users/12779135/senorcardgage"
           class="fab fa-stack-overflow"></a>
    </div>
</div>

<div id="about" class="section">
    <h3>About Me</h3>
    <h4>I am currently working as a independent contractor doing backend web development. I have built several
        websites and apps completely from scratch (including this one) which utilize my skills with the technologies
        listed here: </h4>

    <div id="buttons" class="noSelect">
        <p style="margin: 15px 0px 0px 0px;">Skilled with these:</p>
        <button onclick="switchImg(this.value)" class="techBtn" value="java">Java</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="vertx">Vertx</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="docker">Docker</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="bash">BASH</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="linux">Linux</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="vim">VIM</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="git">Git</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="mysql">MySQL</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="spring">Spring</button>
        <p style="margin: 15px 0px 0px 0px;">Familiar with these:</p>
        <button onclick="switchImg(this.value)" class="techBtn" value="html">HTML/CSS</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="js">JavaScript</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="jquery">JQuery</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="rxjava">RXJava</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="node">Node.js</button>
        <button onclick="switchImg(this.value)" class="techBtn" value="couchbase">Couchbase</button>
    </div>

    <p>Click any button above to see it's description and external links on left side.</p>

    <a href="resume.pdf" target="_blank" download>
        <button id="download" class="noSelect" value="Download CV">Download CV <i class="fa fa-download"></i></button>
    </a>
</div>

<div class="noSelect">
    <a href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)" target="_blank" title="Click to see official site.">
        <img id="bash" class="techImg" src="images/BASH.png">
    </a>
    <a href="https://docs.couchbase.com/home/server.html" target="_blank" title="Click to see official site.">
        <img id="couchbase" class="hideImg" src="images/Couchbase.png">
    </a>
    <a href="https://www.docker.com/" target="_blank" title="Click to see official site.">
        <img id="docker" class="hideImg" src="images/docker.png" height="145">
    </a>
    <a href="https://git-scm.com/" target="_blank" title="Click to see official site.">
        <img id="git" class="hideImg" src="images/github.png">
    </a>
    <a href="https://developer.mozilla.org/en-US/docs/Web/HTML" target="_blank" title="Click to see official site.">
        <img id="html" class="hideImg" src="images/HTML+CSS.png">
    </a>
    <a href="https://spring.io/projects/spring-framework" target="_blank" title="Click to see official site.">
        <img id="spring" class="hideImg" src="images/spring.png" height="165">
    </a>
    <a href="https://en.wikipedia.org/wiki/Java_(programming_language)" target="_blank"
       title="Click to see official site.">
        <img id="java" class="hideImg" src="images/Java.png">
    </a>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank"
       title="Click to see official site.">
        <img id="js" class="hideImg" src="images/JavaScript.png">
    </a>
    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank"
       title="Click to see official site.">
        <img id="jquery" class="hideImg" src="images/jquery.png" height="165">
    </a>
    <a href="https://en.wikipedia.org/wiki/Linux" target="_blank" title="Click to see official site.">
        <img id="linux" class="hideImg" src="images/Linux.png">
    </a>
    <a href="https://mariadb.org/about/" target="_blank" title="Click to see official site.">
        <img id="mysql" class="hideImg" src="images/MySQL.png">
    </a>
    <a href="https://nodejs.org/en/about/" target="_blank" title="Click to see official site.">
        <img id="node" class="hideImg" src="images/Nodejs.png">
    </a>
    <a href="https://github.com/ReactiveX/RxJava" target="_blank" title="Click to see official site.">
        <img id="rxjava" class="hideImg" src="images/rxJava.png">
    </a>
    <a href="https://vertx.io/" target="_blank" title="Click to see official site.">
        <img id="vertx" class="hideImg" src="images/Vertx.png">
    </a>
    <a href="https://www.vim.org/" target="_blank" title="Click to see official site.">
        <img id="vim" class="hideImg" src="images/VIM.png" height="165">
    </a>
</div>

<div>
    <pre id="bashd" class="techDesc"><code class="language-bash">#Backup Database script:
ssh rancher@oip 'docker exec mariadb mysqldump --databases lawn med_dissector portfolio > server.sql'
cd ~/Master/scripts/mysqlScripts/backup
rsync rancher@oip:/home/rancher/server.sql ./server.sql
docker exec mariadb mysqldump -u root -p$pass --databases srev > local.sql

echo "Successfully backed up server databases: lawn med_dissector portfolio
Successfully backed up local databases: srev"
    </code></pre>
    <pre id="couchbased" class="hideDesc"><code class="language-java">/* A simple microservice for inserting new user to
Couchbase database. Taken from the Dungeon Crawl project. */
private void handleInsert(Message&lt;String> message) {
    LOGGER.debug("CouchbaseVerticle.handleInsert received message : " + message.body());
    final ReactiveCluster connection = context.get(ContextKey.couchbaseConnection.name());
    final JsonObject json = JsonObject.fromJson(message.body());
    final String username = json.getString("username");
    final String email = json.getString("email");
    final String hashword = json.getString("password").hashCode() + "";
    final JsonObject user = JsonObject.create();
    user.put("name", username);
    user.put("email", email);
    user.put("hashword", hashword);
    connection.bucket("depths")
      .defaultCollection()
      .insert("user::" + username, user)
      .log()
      .subscribe(result -> {
          LOGGER.debug("Result of insertion: " + result);
          message.reply(null);
        },
        err -> {
          message.reply(err.getMessage());
        });
  }
</code></pre>
    <pre id="dockerd" class="hideDesc"><code class="language-bash">#docker-compose.yml file used to run this page and the other projects on my server.
version: '3'
services:
  db:
    container_name: mariadb
    image: mariadb/server
    volumes:
      - /home/jaredgurr/portfolio-extra/mysqldata:/var/lib/mysql
      - /home/jaredgurr/Master/scripts/mysqlScripts:/mysqlScripts
    environment:
      - MYSQL_ROOT_PASSWORD=$pass
    ports:
      - "3306:3306"
  web:
    container_name: lawn
    image: jaredsdev/nodejsapp
    ports:
      - "8081:8081"
    depends_on:
      - db
  java:
    container_name: portfolio
    image: jaredsdev/portfolio
    ports:
      - "8080:8080"
    depends_on:
      - db
  spring:
    container_name: dissector
    image: jaredsdev/med_dissector
    ports:
      - "8082:8082"
    depends_on:
      - db</code></pre>
    <p id="gitd" class="hideDesc"><a href="https://git-scm.com/" target="_blank" title="Click to see official site.">
        Git</a> is a minimalistic and lightweight but powerful version control software
        which makes it easy to develop projects/apps and explore ideas in separate "branches", and if some new feature
        breaks my app, I can always rewind back to a previous state when it worked. It's exceptionally good for use
        in a team environment.</p>
    <pre id="htmld" class="hideDesc"><code class="language-html">&lt;!--Simple html form snippet from Dungeon Crawl project. -->
&lt;!--The css styles are also included. -->
&lt;!DOCTYPE html>
&lt;html>
&lt;head>
  &lt;meta charset ="UTF-8">
  &lt;title>Registration page&lt;/title>
  &lt;style type="text/css">
* { margin: 0; padding: 0; font-family: courier; }

@media only screen and (max-width: 355px) {
	html { width: 355px; overflow: scroll; }
}

html {
  background: #56cc45;
}

form {
  width: 299px;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: none;
  background: #ddd;
  padding: 25px;
  border-radius: 10px;
  box-shadow: 0px 16px 16px 0px rgba(0, 0, 0, 0.4);
}

input {
  margin: 10px;
}

p {
  font-size: 18px;
}

input[type=text], input[type=password] {
  width: 85%;
  font-size: 20px;
  padding: 5px;
  margin-left: 15px;
  position: relative;
  height: 20px;
  border-radius: 10px;
  border: solid green 4px;
}

input:focus, button:focus {
  outline: none;
}

input.log {
  background: green;
  color: #fff;
  padding-left: 10px;
  padding-right: 10px;
  padding-top: 5px;
  padding-bottom: 2px;
  margin-top: 0px;
  border-radius: 10px;
  font-size: 30px;
  position: relative;
  left: 24%;
}

input.reg {
  background: green;
  color: #fff;
  padding-left: 10px;
  padding-right: 10px;
  padding-top: 5px;
  padding-bottom: 2px;
  margin-top: 0px;
  margin-left: 80px;
  border-radius: 10px;
  font-size: 30px;
  position: relative;
}

button {
  background: green;
  color: #fff;
  padding-left: 10px;
  padding-right: 10px;
  padding-top: 5px;
  padding-bottom: 2px;
  margin-left: 80px;
  border-radius: 10px;
  font-size: 20px;
  position: relative;
}

#forgot {
  margin-left: 55px;
}

a {
  text-align: center;
  text-decoration: none;
  margin: 5px;
}

a:hover {
  text-decoration: underline;
}
  &lt;/style>
&lt;/head>
&lt;body>
  &lt;h1>Register&lt;/h1>
  &lt;form method="post" action="/bus/createUser" spellcheck="false">
        Username:
        &lt;input type="text" name="username" required>&lt;/input>
        &lt;pre>&lt;/pre>
        Email address:
        &lt;input type="text" name="email" required>&lt;/input>
        &lt;pre>&lt;/pre>
        Password:
        &lt;input type="password" name="password" required>&lt;/input>
        &lt;pre>&lt;/pre>
        &lt;input type="submit" class="reg">&lt;/input>
  &lt;/form>
&lt;/body>
&lt;/html>
</code></pre>
    <pre id="springd" class="hideDesc"><code class="language-java">/* A simple controller for api endpoints as part of a
REST api. From the Medical Term Dissector app. */
@RestController
@RequestMapping(path = "/api/term")
public class AffixController {

  private final AffixService affixService;

  @Autowired
  public AffixController(AffixService affixService) {
    this.affixService = affixService;
  }

  @GetMapping(path = "/dissect/{term}")
  public AffixResult getDissectedTerm(@PathVariable("term") String term) {
    return affixService.dissect(term);
  }

  @PostMapping(path = "/dissect")
  public AffixResult getDissectedTermFromBody(@RequestBody Map term) {
    return affixService.dissect(term.get("term").toString());
  }

  private class DissectForm {
    public String term;
  }
}
</code></pre>
    <pre id="javad" class="hideDesc"><code class="language-java">//Immutable HashMap data structure I made for use with Jerbil project:
@Immutable
public class IHashMap&lt;K, V> implements IMap&lt;K, V> {

  static public final IHashMap empty = new IHashMap(new IHashMapEntry[0], 5, 0, 6, 2);
  private final IHashMapEntry&lt;K, V>[] entries;
  private final int bucketSize;
  private final float threshold = 0.3f;
  private final int entriesInUse;
  private final int bucketCount;
  private final int expansionFactor;

  private IHashMap(IHashMapEntry&lt;K, V>[] entries, int bucketSize, int entriesInUse, int bucketCount, int expansionFactor) {

    this.entries = entries;
    this.bucketSize = bucketSize;
    this.entriesInUse = entriesInUse;
    this.bucketCount = bucketCount;
    this.expansionFactor = expansionFactor;

  }

  public static &lt;K, V> IHashMap&lt;K, V> from(Object... objects) {

    assert objects.length % 2 == 0;
    final int entriesInUse = objects.length / 2;
    final int bucketSize = 5;
    final int entryCount = (int) (objects.length / .3f);
    final int bucketCount = entryCount / bucketSize;
    final IHashMapEntry&lt;K, V>[] entries = new IHashMapEntry[entryCount];
    for (int i = 0; i < objects.length - 1; i += 2) {
      final K key = (K) objects[i];
      final V value = (V) objects[i + 1];
      final int hashCode = Math.abs(key.hashCode());
      final int bucketIndex = hashCode % bucketCount;
      int c = 0;
      int entryIndex = bucketIndex * bucketSize;
      while (c < entries.length) {
        if (entries[entryIndex] == null) {
          entries[entryIndex] = IHashMapEntry.from(key, value);
          break;
        }
        c++;
        entryIndex++;
        if (entryIndex >= entries.length) {
          entryIndex = 0;
        }
      }
    }
    final IHashMap&lt;K, V> map = new IHashMap<>(entries, bucketSize, entriesInUse, bucketCount, 2);
    return map;
  }

  @Override
  public IHashMap&lt;K, V> putAll(Object... keyOrValue) {

    int c = 0;
    assert keyOrValue.length % 2 == 0;
    IHashMapEntry&lt;K, V>[] newEntries = new IHashMapEntry[entries.length];
    int newBucketCount = bucketCount;
    int newEntriesInUse = keyOrValue.length / 2 + entriesInUse;
    if (newEntriesInUse > (int) (entries.length * threshold)) {
      final int entryCount = (int) (newEntriesInUse * 2 / threshold);
      newBucketCount = entryCount / bucketSize;
      newEntries = new IHashMapEntry[entryCount];
      rehash(entries, newEntries, newBucketCount, bucketSize);
    } else {
      while (c < entries.length) {
        newEntries[c] = entries[c];
        c++;
      }
      c = 0;
    }
    for (int i = 0; i < keyOrValue.length - 1; i += 2) {
      final K key = (K) keyOrValue[i];
      final V value = (V) keyOrValue[i + 1];
      final int hashCode = Math.abs(key.hashCode());
      final int bucketIndex = hashCode % newBucketCount;
      int entryIndex = bucketIndex * bucketSize;
      while (c < newEntries.length) {
        if (newEntries[entryIndex] == null) {
          newEntries[entryIndex] = IHashMapEntry.from(key, value);
          break;
        }
        c++;
        entryIndex++;
        if (entryIndex >= newEntries.length) {
          entryIndex = 0;
        }
      }
    }
    final IHashMap&lt;K, V> map = new IHashMap<>(newEntries, bucketSize, newEntriesInUse, newBucketCount, 2);
    return map;

  }

  @Override
  public IHashMap&lt;K, V> put(K key, V value) {

    int newBucketCount = bucketCount;
    IHashMapEntry&lt;K, V>[] newEntries = new IHashMapEntry[entries.length];
    int c = 0;
    while (c < entries.length) {
      newEntries[c] = entries[c];
      c++;
    }
    c = 0;
    final int hashCode = Math.abs(key.hashCode());
    final int bucketIndex = hashCode % newBucketCount;
    int entryIndex = bucketIndex * bucketSize;
    int newEntriesInUse = entriesInUse;
    while (c < newEntries.length) {
      if (newEntries[entryIndex] == null) {
        newEntries[entryIndex] = IHashMapEntry.from(key, value);
        newEntriesInUse += 1;
        break;
      }
      c++;
      entryIndex++;
      if (entryIndex >= newEntries.length) {
        entryIndex = 0;
      }
    }
    if (entriesInUse > newEntries.length * threshold) {
      final int entryCount = getEntryCount();
      newBucketCount = entryCount / bucketSize;
      newEntries = new IHashMapEntry[entryCount];
    }
    final IHashMap&lt;K, V> map = new IHashMap<>(newEntries, bucketSize, newEntriesInUse, newBucketCount, 2);
    return map;
  }

  @Override
  public IMap&lt;K, V> remove(K key) {
    return null;
  }

  private int getEntryCount() {
    return (int) (entriesInUse * expansionFactor / threshold);
  }

  @Override
  public int size() {
    return entriesInUse;
  }

  @Override
  public V get(K key) {

    final int hashCode = Math.abs(key.hashCode());
    final int bucketIndex = hashCode % bucketCount;
    int entryIndex = bucketIndex * bucketSize;
    int c = 0;
    while (c < entries.length) {
      if (entries[entryIndex] == null) {
        return null;
      } else if (entries[entryIndex].getKey() == key) {
        return entries[entryIndex].getValue();
      }
      c++;
      entryIndex++;
    }
    return null;
  }

  public IHashMap&lt;K, V> setBucketSize(int newBucketSize) {

    final IHashMapEntry&lt;K, V>[] newEntries = new IHashMapEntry[entries.length];
    rehash(entries, newEntries, bucketCount, newBucketSize);
    return new IHashMap(newEntries, newBucketSize, entriesInUse, bucketCount, 2);

  }

  public IHashMap&lt;K, V> setBucketCount(int newBucketCount) {

    final IHashMapEntry&lt;K, V>[] newEntries = new IHashMapEntry[newBucketCount * bucketSize];
    rehash(entries, newEntries, newBucketCount, bucketSize);
    return new IHashMap(newEntries, bucketSize, entriesInUse, newBucketCount, 2);
  }

  private void rehash(IHashMapEntry&lt;K, V>[] entries, IHashMapEntry&lt;K, V>[] newEntries, int newBucketCount, int newBucketSize) {

    for (int i = 0; i < entries.length; i++) {
      if (entries[i] != null) {
        IHashMapEntry&lt;K, V> entry = entries[i];
        final int newBucketIndex = Math.abs(entry.getKey().hashCode()) % newBucketCount * newBucketSize;
        for (int k = newBucketIndex; k < newEntries.length; k++) {
          if (k > newEntries.length) {
            k = 0;
          }
          if (newEntries[k] == null) {
            newEntries[k] = entry;
            break;
          }
        }
      }
    }

  }

  public int getBucketCount() {
    return bucketCount;
  }

  public int getBucketSize() {
    return bucketSize;
  }

  public IHashMap&lt;K, V> setThreshold(double v) {

    IHashMapEntry&lt;K, V>[] newEntries = entries;
    int newBucketCount = bucketCount;
    if (entriesInUse > entries.length * threshold) {
      newEntries = new IHashMapEntry[entries.length];
      newBucketCount = getEntryCount() / bucketSize;
      rehash(entries, newEntries, newBucketCount, bucketSize);
    }
    return new IHashMap(newEntries, bucketSize, entriesInUse, newBucketCount, expansionFactor);
  }

}

class IHashMapEntry&lt;K, V> {

  private final K key;
  private final V value;
  public static IHashMapEntry empty = new IHashMapEntry(new IHashMapEntry[0], 10);

  private IHashMapEntry(K key, V value) {

    this.key = key;
    this.value = value;
  }

  public static &lt;K, V> IHashMapEntry&lt;K, V> from(K key, V value) {

    return new IHashMapEntry<>(key, value);
  }

  public K getKey() {

    return key;
  }

  public V getValue() {

    return value;
  }

  public IHashMapEntry&lt;K, V> setValue(V v) {

    return new IHashMapEntry&lt;K, V>(key, v);
  }

}</code></pre>
    <pre id="jsd" class="hideDesc"><code class="language-javascript">/* Simple function I made for making post request,
and for sending the response data to a method for handling
and displaying results.*/
function obtainJson() {
    let inputTerm = document.getElementById("inputTerm").value
    fetch('/api/term/dissect', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            term: inputTerm
        })
    }).then(res => {
        return res.json()
    }).then(data => {
        showDissectedResults(data)
    })
}</code></pre>
    <pre id="jqueryd" class="hideDesc"><code class="language-javascript">/* A simple jquery snippet which shows how I
check if a user has logged in recently, if they have
this will redirect them to the main page, otherwise
it will make them login. Taken from my wilderness project. */
&lt;script type="text/javascript" language="JavaScript">
    $(document).ready(function () {
        let decodedCookie = decodeURIComponent(document.cookie);
        if (decodedCookie.search("username") > -1) {
            $(window).attr('location', '/main.php');
        }

        $("#loginDriver").click(function (event) {
            let uname = $("#username").val();
            let pass = $("#passwordCheck").val();
            $("#stage").load('/mysqlLogin.php', {
                "uname": uname,
                "pass": pass,
            }, function () {
                if ($("#loginResult").html() === 'success') {
                    let curDate = new Date();
                    curDate.setDate(curDate.getDate() + 1);
                    let date = curDate.toUTCString();
                    document.cookie = "username=" + uname + "; expires=" + date + "; path=/";
                    $(window).attr('location','/main.php');
                } else {
                    $(".input").val('');
                }
            });
        });
    });
&lt;/script>
    </code></pre>
    <p id="linuxd" class="hideDesc">After I built my own PC, I decided to install both Windows and <a
            href="https://en.wikipedia.org/wiki/Linux" target="_blank" title="Click to see official site.">
        Linux</a> on it in a dual boot configuration. Within a short time, I found out I liked developing within
        Linux much more than I did within Windows, so now I use Linux for 100% of my programming. Right now my
        workstation OS is Pop!_OS, which is based on Ubuntu. Beyond that, I also run my servers in RancherOS and use
        Alpine within that.</p>
    <pre id="mysqld" class="hideDesc"><code class="language-sql"> --Simple script for creating the database for the wilderness project.
DROP DATABASE IF EXISTS wilderness;
CREATE DATABASE wilderness;
USE wilderness;

SOURCE /sqlScripts/backup.sql;

CREATE TABLE `task` (
   `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
   `title` varchar(255) UNIQUE NOT NULL,
   `tech` varchar(150) not null,
   `survival` BOOLEAN,
   `city` BOOLEAN,
   `homestead` BOOLEAN,
   `tOrder` int(10) unsigned DEFAULT NULL,
   `tGroup` varchar(40) DEFAULT NULL,
   `user_author` varchar(40) DEFAULT 'TheGuy',
   `purpose` text DEFAULT NULL,
   `instructions` text DEFAULT NULL,
   `image` VARCHAR(255) DEFAULT '',
   INDEX (`tGroup`),
   PRIMARY KEY (`id`)
) ENGINE InnoDB;

CREATE TABLE `user` (
   `id` int unsigned NOT NULL AUTO_INCREMENT,
   `username` varchar(50) NOT NULL,
   `name` varchar(50) not null,
   `password` varchar(255) NOT NULL,
   `email` varchar(50) NOT NULL,
   `phone` varchar(15) DEFAULT NULL,
   `date_created` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
   `updated_time` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
   PRIMARY KEY (`id`),
   UNIQUE KEY `email` (`email`),
   UNIQUE KEY `username` (`username`)
) ENGINE InnoDB;

CREATE TABLE `supply` (
   `id` int unsigned NOT NULL AUTO_INCREMENT,
   `task_id` int unsigned,
   `name` varchar(50) NOT NULL,
   `base_material` varchar(50) NOT NULL,
   `secondary_material` varchar(50) DEFAULT NULL,
   `description` text,
   `common` enum('Y','N') DEFAULT 'N',
   `howToGet` text NOT NULL,
   PRIMARY KEY (`id`)
) ENGINE InnoDB;

CREATE TABLE taskCompletion(
   `user_id` int unsigned,
   `task_id` int unsigned,
   `timeSpent` time not null,
   `dateCompleted` datetime not null default current_timestamp,
   PRIMARY KEY (`user_id`, `task_id`)
) ENGINE InnoDB;

CREATE TABLE `source` (
   `method_id` int(10) unsigned DEFAULT NULL,
   `source1` text NOT NULL,
   `source2` text,
   `source3` text,
   `source4` text,
   `source5` text,
   `extraInfo` text
) ENGINE InnoDB;


DELIMITER //
CREATE PROCEDURE createNewUser(
    IN username VARCHAR(50), IN name varchar(50), IN pass VARCHAR(255), IN email VARCHAR(50), IN phone VARCHAR(15))
BEGIN
    INSERT INTO user VALUES (0, username, name, pass, email, phone, default, default);
END //

CREATE PROCEDURE retrieveUser(IN uname VARCHAR(50), IN pass VARCHAR(255))
BEGIN
    SELECT * FROM user WHERE username = uname AND password = pass;
END //

CREATE PROCEDURE retrieveUserFromEmail(IN uname VARCHAR(50), IN user_email VARCHAR(50))
BEGIN
    SELECT * FROM user WHERE username = uname AND email = user_email;
END //

CREATE PROCEDURE updateUser(
    IN uname VARCHAR(50), IN newUName VARCHAR(50), IN name varchar(50), IN pass VARCHAR(255), IN email VARCHAR(50), IN phone VARCHAR(15))
BEGIN
    SET @uid = (SELECT `id` FROM `user` WHERE username = uname);
    REPLACE INTO user VALUES (@uid, newUName, name, pass, email, phone, default, default);
END //

CREATE PROCEDURE deleteUser(IN uname VARCHAR(50), IN pass VARCHAR(255))
BEGIN
    SET @uid = (SELECT id FROM user WHERE username = uname AND password = pass FOR UPDATE);
    IF @uid = (SELECT id FROM user WHERE username = uname AND password = pass) THEN
        DELETE FROM user WHERE username = uname AND password = pass;
        DELETE FROM taskCompletion WHERE user_id = @uid;
    ELSE SELECT 'no user found with that username/password' AS message;
    END IF;
END //

CREATE PROCEDURE createNewTask(IN title VARCHAR(255), IN tech VARCHAR(150), IN orderNo INT, IN purpose TEXT, IN instruction TEXT)
BEGIN
    UPDATE task SET `tOrder` = `tOrder` + 1 WHERE `tOrder` >= orderNo;
    INSERT INTO task VALUES (0, title, tech, 1, 1, 1, orderNo, 'TheGuy', purpose, instruction, null);
END //

CREATE PROCEDURE getNextTask(IN u1 VARCHAR(50))
BEGIN
    SELECT * FROM task WHERE id =
        (SELECT task_id FROM taskCompletion WHERE user_id =
            (SELECT id FROM user WHERE username = u1) AND dateCompleted =
                (SELECT MAX(dateCompleted))) + 1;
END //

CREATE PROCEDURE getTasks(IN myOffset int, IN amount int)
BEGIN
    SELECT * FROM task LIMIT myOffset, amount;
end //

CREATE PROCEDURE addImage(IN taskTitle varchar(255), IN imageName varchar(255))
BEGIN
    UPDATE task SET image = imageName WHERE title = taskTitle;
END //

DELIMITER ;

CREATE ROLE IF NOT EXISTS 'app', 'developer','administrator';
GRANT ALL ON *.* TO 'administrator';
GRANT INSERT, UPDATE, DELETE ON wilderness.* TO 'developer';
GRANT EXECUTE ON wilderness.* TO 'app';
CREATE USER IF NOT EXISTS 'someone'@'localhost' IDENTIFIED BY 'somepass';
CREATE USER IF NOT EXISTS 'app'@'localhost' IDENTIFIED BY 'somepass';
GRANT 'app' TO 'app'@'localhost';
GRANT 'administrator' TO 'someone'@'localhost';
FLUSH PRIVILEGES;

LOAD DATA LOCAL INFILE './sqlScripts/insertTasks.csv' INTO TABLE task FIELDS TERMINATED BY ',' IGNORE 1 LINES;</code></pre>
    <pre id="noded" class="hideDesc"><code class="language-javascript">/*I made this page to send customer data to MySQL
database for the lawn app. */
const express = require('express');
const app = express();
const bodyParser = require('body-parser');
const port = 8081
const mariadb = require('mariadb');
const config = require('./config.js');

const pool = mariadb.createPool({
    host: config.myHost,  //name of my container from docker-compose.yml line 3.
    user: config.myUser,
    password: config.pass,
    database: config.db
})

app.use(express.static('public'));
app.use(bodyParser.json());
app.use(bodyParser.urlencoded({extended: false}));

app.post('/api/contact', async (req, res) => {
    console.log('post request received at api/contact.')
    let con;
    try {
        console.log(req.body);
        con = await pool.getConnection();
        const username = req.body.name;
        const email = req.body.email;
        const phone = req.body.phone;
        const service = req.body.services;
        const address = req.body.address;
        const intervals = req.body.intervals;
        const message = req.body.message;
        await con.query('INSERT INTO contact VALUES (?, ?, ?, ?, ?, ?, ?, CURDATE())',
            [username, email, phone, service, address, intervals, message]);
        res.redirect('back');
        console.log('1 Record inserted.')
    } catch (err) {
        throw err;
    } finally {
        if (con) return con.release();
    }
});
</code></pre>
    <pre id="rxjavad" class="hideDesc"><code class="language-java">//A MySQL microservice for inserting new users to database via html forms.
//From dungeon-crawl project
  private void handleInsert(Message&lt;String> message) {
    LOGGER.debug("MysqlVerticle.handleInsert received message: " + message.body());
    final MySQLPool client = context.get(ContextKey.mysqlConnection.name());
    try {
      final JsonObject json = new JsonObject(message.body());
      final String username = json.getString("username");
      final String password = json.getString("password").hashCode() + "";
      final String email = json.getString("email");
      client
        .preparedQuery("INSERT INTO player VALUES (?,?,?,?)")
        .execute(Tuple.of(0, username, password, email), ar -> {
          if (ar.succeeded()) {
            LOGGER.debug("Successfully inserted record for: " + username);
            message.reply(null);
          } else {
            message.fail(500, "invalid insert statement " + ar.cause().getMessage());
          }
        });
    } catch (Exception e){
      message.fail(500, "invalid insert statement");
    }
  }</code></pre>
    <pre id="vertxd" class="hideDesc"><code class="language-java">//MySQL microservice made to handle the routing for this portfolio webpage and the external projects.
  @Override
  public Completable rxStart() {
    LOGGER.info("Http Verticle is starting. Make sure MariaDB is running.");
    HttpServer server = vertx.createHttpServer();

    Router router = Router.router(vertx);
    router.route().handler(StaticHandler.create());
    router.get("/").handler(this::redirect);
    router.get("/lawnpage").handler(this::redirect);
    router.get("/med_dissector").handler(this::redirect);
    router.get("/static/*").handler(this::staticHandler);
    router.route().handler(BodyHandler.create());
    router.post("/api/contact").handler(this::busHandler);
    final int port = 8080;
    final Single&lt;HttpServer> rxListen = server
            .requestHandler(router)
            .rxListen(port)
            .doOnSuccess(e -> {
              LOGGER.info("HTTP server running on port " + port);
            })
            .doOnError(e -> {
              LOGGER.error("Could not start a HTTP server", e.getMessage());
            });

    return rxListen.ignoreElement();
  }</code></pre>
    <img id="vimd" class="hideDesc" src="images/vimExamples.gif">
</div>

<div id="qualifications" class="hideSection">
    <h3>Qualifications:</h3>
    <!--
        <li>MySQL Certified from Oracle</li>
    -->
    <li>3 years of experience developing web applications. (See Portfolio)</li>
    <li>Mostly self-taught aside from some mentorship.</li>
    <li>1 year of college</li>
    <li>Deep understanding of computers and hardware. Built several powerful pc's from scratch for people.</li>
    <li>Eagerness and willing to learn new things. Continuous education is my goal.</li>
</div>

<div id="contact" class="hideSection">
    <form class="noSelect" method="post" action="/api/contact"
          onsubmit="alert('Your message has been sent. I will respond to you as soon as possible. Thank you!')">
        <input type="text" name="name" placeholder="name" required>
        <input type="text" name="business" placeholder="business" required>
        <input type="text" name="position" placeholder="position you're hiring for" required>
        <input type="text" name="callback" placeholder="When I should call you back" required>
        <input type="text" name="phone" placeholder="phone number" required>
        <input type="text" name="interview_date" placeholder="(optional) interview date">
        <button type="submit" value="Submit">Submit</button>
    </form>
</div>


<div id="portfolio" class="hideSection">
    <div id="portCont1" class="portCont">
        <h3 style="margin-bottom:-.03in">Here is a list of my projects with many more on the way:</h3>
        <li style="margin-bottom:-.05in;"><a href="/lawnpage" target="_blank">Lawn App</a></li>
        <p>This was my very first project I ever did. Built with Node.js and MySQL/Mariadb connector.
            The goal was to create a professional looking lawn care business site so I could practice developing
            webpages with Database Integration. It runs completely within Docker containers. It is also built
            with REST API for handling http requests/responses, and CRUD API for handling user data.</p>
        <li><a href="/med_dissector" target="_blank">Medical Term Dissector</a></li>
        <p>This is a simple webpage, but the magic occurs behind the scenes. This page takes any medical term
        which you give it, and it dissects the word into smaller parts explaining what each part means in context
        of a medical roots, prefix and suffix table. It is built with a fully functioning REST api inside Spring-Boot
            using MySQL and Hibernate ORM.</p>
    </div>
    <div id="portCont2" class="hidePort">
        <li><a href="http://arizonapomeranians.com" target="_blank">Arizona Pomeranians</a></li>
        <p>This was my second project, client had an old webpage they wanted me to replace with a more modern one.
            but still keep the appealing parts of it. Here I got to practice my skill with JS-DOM manipulation for the
            pictures.</p>
        <li>CrawlWebpage:</li>
        <p>This is currently my most ambitious project. It is a work in progress and it's a group effort
            with me and two other developers. It's basically a video game you play in your browser based on the online
            game <a href="https://en.wikipedia.org/wiki/Dungeon_Crawl_Stone_Soup" target="_blank">"Dungeon Crawl Stone
                Soup".</a></p>
        <p>I liked working on this project because it deepened my understanding of Java programming
            with Vertx. It also helped me develop skill with Model-View-Controller concepts as well as
            with Web Routing. I also learned standard practices that businesses such as American Express
            use for querying Couchbase with N1QL. This was also helpful in continuing my understanding of
            REST and CRUD API.</p>
    </div>
    <div class="pagination">
        <div class="noSelect">
            <span id="leftArrow" class="arrows" onclick="changePage(this.id)">&lt;</span>
            <a href="#" id="1" class="active" onclick="changePage(this.id)">1</a>
            <a href="#" id="2" class="inactive" onclick="changePage(this.id)">2</a>
            <span id="rightArrow" class="arrows" onclick="changePage(this.id)">&gt;</span>
        </div>
    </div>
</div>

</body>
<footer>
    <p>This webpage runs on Java/Vertx and Docker + MySql.</p>
</footer>

<script>
    //window.onload  //This needs to be somehow used before or wrapped around code.
    const menuButton = document.querySelector("#menu")
    const content = document.querySelector("#content")
    menuButton.onclick = function () {
        dropdown()
    }

    function dropdown() {
        if (content.style.display === "none") {
            content.style.display = "block"
        } else {
            content.style.display = "none"
        }
    }

    let currentImg = document.querySelector(".techImg")
    let currentDesc = document.querySelector(".techDesc")

    function switchImg(id) {
        currentImg.setAttribute("class", "hideImg")
        currentDesc.setAttribute("class", "hideDesc")
        let newImg = document.getElementById(id)
        let newDesc = document.getElementById(id + "d")
        newImg.setAttribute("class", "techImg");
        newDesc.setAttribute("class", "techDesc")
        currentImg = document.querySelector(".techImg")
        currentDesc = document.querySelector(".techDesc")
    }

    let currentSec = document.querySelector(".section")

    // let currentActiveButton = document.getElementById("activeButton")

    function replaceSection(value) {
        currentSec.setAttribute("class", "hideSection")
        let newSec = document.getElementById(value)
        newSec.setAttribute("class", "section")
        currentSec = document.querySelector(".section")
        // For some reason I cannot get this to work. UPDATE: Just do document.querySelector instead and replace (value) with (`${value}`)
        // let clickedButton = document.getElementsByClassName(value)
        // if (clickedButton.getAttribute("id") === "activeButton") {
        //     return
        // } else {
        //     currentActiveButton.setAttribute("id", "")
        //     clickedButton.setAttribute("id", "activeButton")
        // }
    }

    let currentPort = document.querySelector(".portCont")
    let active = document.querySelector(".active")
    let inactive = document.querySelector(".inactive")

    function changePage(id) {
        if (id === "1" || id === "2") {
            if (active.getAttribute("id") !== id) {
                active.setAttribute("class", "inactive")
                inactive.setAttribute("class", "active")
            }
            let newPort = document.getElementById("portCont" + id)
            currentPort.setAttribute("class", "hidePort")
            newPort.setAttribute("class", "portCont")
            currentPort = document.querySelector(".portCont")
            active = document.querySelector(".active")
            inactive = document.querySelector(".inactive")
        } else {
            active.setAttribute("class", "inactive")
            inactive.setAttribute("class", "active")
            let newPort = document.querySelector(".hidePort")
            newPort.setAttribute("class", "portCont")
            currentPort.setAttribute("class", "hidePort")
            currentPort = document.querySelector(".portCont")
            active = document.querySelector(".active")
            inactive = document.querySelector(".inactive")
        }
    }


</script>

</html>